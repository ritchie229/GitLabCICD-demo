## GitLab CI/CD наглядно

> Простой пример CI/CD с py приложением от hit push до деплоя на прод сервере по ssh, каждый может запустить у себя на лабе.

1. Надо создать проект/репо

2. Всунуть в репо вары (Project->Settings>-CI/CD->Variables). Примерs:
- DOCKERHUB_PASS # на всякий пожарный (токен, пароль мовитон)
- DOCKERHUB_USER # тоже на всякий пожарный
- SSH_PRIVATE_KEY # для обеспечения доступа с контейнера на прод сервер.

3. Нужен раннер, если его нет.
- скачать на сервер,
- устанвоить,
- в админке создать (Project->Settings->CI/CD->Runners->New Project Runer),
- регистрировать раннер указав название, на чем крутиться будет (докер), токен предложенный во время создания раннера в админке,
- в конфиге (/etc/gitlab-runner/config.toml) указать имидж, пр. docker:27, privileged = true, volumes = ["/cache"] и тп.

4. Создать на прод сервере пользователя, и ssh публичный ключ в /home/<user>/.ssh/authorized_keys. Проверить доступ извне.

5. Ну и весь проект с Dockerfile, .git-lab.ci, requirements, test.py, app.py

> [!CAUTION]
> Сории за lack of beauty и скудность инфо, 2 ночи, пра спать!
